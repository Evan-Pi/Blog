{% extends 'articles/base.html' %}

{% load static %}

{% block meta %}
<meta name="description" content="">
{% endblock %}

{% block title %}
<title>Homepage</title>
{% endblock %}

{% block links %}
<link rel="stylesheet" href="{% static 'articles/css/index.css' %}">
<link rel="stylesheet" href="{% static 'articles/css/articles.css' %}">
{% endblock %}

{% block main %}
{% include 'articles/navigation.html' %}

<div id="search-articles-results-wrapper" class="container-fluid">
  <div class="row" id="search-articles-results">

  </div>
</div>

<div style="background-image:url({% static 'articles/material/index/homepage_wallpaper.jpg' %});" id="index1">

</div>

{% endblock %}

{% block scripts %}
<script type="text/javascript">
  $('#nav-tools-search').click(function() {
    $('#search-articles-results').css({'display':'flex'});
    var initialSerializedData = $("#search-articles-form").serialize();
    $.ajax({
      type: 'POST',
      url: "{% url 'ajaxArticles' %}",
      data: initialSerializedData,
      success: function(data) {
        //reset the form after successful submit
        $("#search-articles-results").html(data);
      },
      error: function(response) {
        console.log(response)
      }
    });
  });

  $('#nav-tools-close').click(function() {
    $('#search-articles-results').fadeOut();
  });

  $("#nav-tools-searchInput").keyup(function() {
    $("#searchButton").click();
  });
  $("#search-articles-form").submit(function(e) {
    // prevent from normal form behaviour
    e.preventDefault();
    // serialize the form data
    var serializedData = $(this).serialize();

    $.ajax({
      type: 'POST',
      url: "{% url 'ajaxArticles' %}",
      data: serializedData,
      success: function(data) {
        //reset the form after successful submit
        $("#search-articles-results").html(data);
      },
      error: function(response) {
        console.log(response)
      }
    });
  });
</script>
{% endblock %}

{% block footer %}
{% include 'articles/footer.html' %}
{% endblock %}
